[{"path":"https://rfsaldanha.github.io/zonalclim/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2023 zonalclim authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Raphael Saldanha. Author, maintainer.","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Saldanha R (2024). zonalclim: Compute Zonal Statistics Climate. R package version 0.0.1, https://rfsaldanha.github.io/zonalclim/.","code":"@Manual{,   title = {zonalclim: Compute Zonal Statistics for Climate},   author = {Raphael Saldanha},   year = {2024},   note = {R package version 0.0.1},   url = {https://rfsaldanha.github.io/zonalclim/}, }"},{"path":"https://rfsaldanha.github.io/zonalclim/index.html","id":"zonalclim","dir":"","previous_headings":"","what":"Compute Zonal Statistics for Climate","title":"Compute Zonal Statistics for Climate","text":"R package presents helper functions compute zonal statistics using NetCDF sf objects climate studies. Zonal statistics Geographic Information System (GIS) method compute summary statistic (like mean, standard deviation, sum) spatially contiguous indicator given boundary. especially useful compute climate indicators spatially aggregated geographical boundaries, like counties municipalities. package relies exactextractr package compute zonal statistics, providing helper functions compute statistics large NetCDF files layers several geographical boundaries.","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Compute Zonal Statistics for Climate","text":"","code":"# install.packages(\"remotes\") remotes::install_github(\"rfsaldanha/zonalclim\")"},{"path":"https://rfsaldanha.github.io/zonalclim/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Compute Zonal Statistics for Climate","text":"handle large NetCDF files several geographical boundaries, package presents function create chunks tasks. example, can compute zonal statistics using package example dataset. nc_list object path NetCDF file, layers different dates indicator (maximum temperature Copernicus ERA5-Land Mozambique). can also list NetCDF files structure. sf_geom contains geographical boundaries (level 3) zonal_list vector summary functions computed.","code":"library(zonalclim) nc_list <- system.file(\"extdata\", \"2m_temperature_2000-01-01_2000-01-31_day_max.nc\", package=\"zonalclim\") sf_geom <- gadm41_moz zonal_list <- c(\"mean\", \"max\", \"min\", \"stdev\")"},{"path":"https://rfsaldanha.github.io/zonalclim/index.html","id":"zonal-tasks","dir":"","previous_headings":"Usage","what":"Zonal tasks","title":"Compute Zonal Statistics for Climate","text":"handling large number NetCDF files, one large number layers, load compute zonal statistics can larger available computational capacity. situation, can split computational task smaller tasks, using zonal_tasks() function. function split NetCDF file(s) sf contents chunks tasks, based arguments nc_chunk_size sf_chunck_size. key finding balance chunk sizes, speed, computational load. Less larger chunks faster compute several smaller chunks demand available memory. example, function combined 31 raster layers, 413 spatial boundaries, four statistics computed 28 computational tasks. Bigger chunk sizes lead fewer heavier tasks.","code":"zonal_tasks <- create_zonal_tasks(   nc_files_list = nc_list,   nc_chunk_size = 5,   sf_geom = sf_geom,   sf_chunck_size = 5,   zonal_functions = zonal_list ) zonal_tasks #> # A tibble: 28 × 3 #>    rst                geom           fn    #>    <list>             <list>         <chr> #>  1 <SpatRstr[,111,5]> <sf [413 × 4]> mean  #>  2 <SpatRstr[,111,5]> <sf [413 × 4]> max   #>  3 <SpatRstr[,111,5]> <sf [413 × 4]> min   #>  4 <SpatRstr[,111,5]> <sf [413 × 4]> stdev #>  5 <SpatRstr[,111,5]> <sf [413 × 4]> mean  #>  6 <SpatRstr[,111,5]> <sf [413 × 4]> max   #>  7 <SpatRstr[,111,5]> <sf [413 × 4]> min   #>  8 <SpatRstr[,111,5]> <sf [413 × 4]> stdev #>  9 <SpatRstr[,111,5]> <sf [413 × 4]> mean  #> 10 <SpatRstr[,111,5]> <sf [413 × 4]> max   #> # ℹ 18 more rows"},{"path":"https://rfsaldanha.github.io/zonalclim/index.html","id":"compute-tasks","dir":"","previous_headings":"Usage","what":"Compute tasks","title":"Compute Zonal Statistics for Climate","text":"compute tasks, use compute_zonal_tasks() function. function compute tasks (sequentially) store results SQLite database. Let’s check results.","code":"db_file <- tempfile(fileext = \".sqlite\") res <- compute_zonal_tasks(   zonal_tasks = zonal_tasks,   g_var = \"GID_3\",   db_file = db_file ) #> ℹ Starting... #>  ■■■■■■■■■■■                       32% |  ETA:  2s ■■■■■■■■■■■■                      36% |  ETA:  2s ■■■■■■■■■■■■■■■                   46% |  ETA:  2s ■■■■■■■■■■■■■■■■                  50% |  ETA:  2s ■■■■■■■■■■■■■■■■■■■■■■            71% |  ETA:  1s ■■■■■■■■■■■■■■■■■■■■■■■■■         79% |  ETA:  1s ■■■■■■■■■■■■■■■■■■■■■■■■■■■       86% |  ETA:  0sNew names:New names: ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■     93% |  ETA:  0sNew names:New names:                                                  ℹ Done! #> 3.024 sec elapsed conn <- DBI::dbConnect(RSQLite::SQLite(), db_file, extended_types = TRUE) tables <- DBI::dbListTables(conn) res2 <- dplyr::tbl(conn, tables[1]) %>% dplyr::collect() res2 #> # A tibble: 51,212 × 4 #>    GID_3       date       name                    value #>    <chr>       <date>     <chr>                   <dbl> #>  1 MOZ.1.1.1_1 2000-01-01 2m_temperature_max_mean  306. #>  2 MOZ.1.1.1_1 2000-01-02 2m_temperature_max_mean  305. #>  3 MOZ.1.1.1_1 2000-01-03 2m_temperature_max_mean  299. #>  4 MOZ.1.1.1_1 2000-01-04 2m_temperature_max_mean  302. #>  5 MOZ.1.1.1_1 2000-01-05 2m_temperature_max_mean  304. #>  6 MOZ.1.1.2_1 2000-01-01 2m_temperature_max_mean  306. #>  7 MOZ.1.1.2_1 2000-01-02 2m_temperature_max_mean  305. #>  8 MOZ.1.1.2_1 2000-01-03 2m_temperature_max_mean  300. #>  9 MOZ.1.1.2_1 2000-01-04 2m_temperature_max_mean  302. #> 10 MOZ.1.1.2_1 2000-01-05 2m_temperature_max_mean  304. #> # ℹ 51,202 more rows"},{"path":"https://rfsaldanha.github.io/zonalclim/reference/compute_task.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute a zonal task — compute_task","title":"Compute a zonal task — compute_task","text":"Compute zonal task","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/reference/compute_task.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute a zonal task — compute_task","text":"","code":"compute_task(rst, pol, pop = NULL, g_var, fn_name, db_file)"},{"path":"https://rfsaldanha.github.io/zonalclim/reference/compute_task.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute a zonal task — compute_task","text":"rst rst variable zonal tasks tibble pol pol variable zonal tasks tibble pop Optional. Population weighting raster g_var Variable name (string) unique identifies feature sf object. fn_name fn_name variable zonal tasks tibble db_file Path file name SQLite database.","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/reference/compute_task.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute a zonal task — compute_task","text":"Writes results zonal taks SQLite database return TRUE value.","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/reference/compute_zonal_tasks.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute zonal tasks — compute_zonal_tasks","title":"Compute zonal tasks — compute_zonal_tasks","text":"Compute zonal tasks","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/reference/compute_zonal_tasks.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute zonal tasks — compute_zonal_tasks","text":"","code":"compute_zonal_tasks(zonal_tasks, g_var, db_file)"},{"path":"https://rfsaldanha.github.io/zonalclim/reference/compute_zonal_tasks.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute zonal tasks — compute_zonal_tasks","text":"zonal_tasks tibble zonal tasks created create_zonal_tasks g_var Variable name (string) unique identifies feature sf object. db_file path file name SQLite database.","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/reference/compute_zonal_tasks.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute zonal tasks — compute_zonal_tasks","text":"SQLite database.","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/reference/create_zonal_tasks.html","id":null,"dir":"Reference","previous_headings":"","what":"Create tasks of zonal statistics — create_zonal_tasks","title":"Create tasks of zonal statistics — create_zonal_tasks","text":"Create tasks zonal statistics","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/reference/create_zonal_tasks.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create tasks of zonal statistics — create_zonal_tasks","text":"","code":"create_zonal_tasks(   nc_files_list,   nc_chunk_size,   sf_geom,   sf_chunck_size,   zonal_functions,   pop = NULL )"},{"path":"https://rfsaldanha.github.io/zonalclim/reference/create_zonal_tasks.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create tasks of zonal statistics — create_zonal_tasks","text":"nc_files_list vector NetCDF files addresses. nc_chunk_size Chunk size raster layers processing. sf_geom sf object. sf_chunck_size Chunk size sf features processing. zonal_functions vector zonal statistics computed. pop optional. vector population raster address.","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/reference/create_zonal_tasks.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create tasks of zonal statistics — create_zonal_tasks","text":"tibble row zonal statistic computed using chunk raster layers chunk sf features.","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/reference/gadm41_moz.html","id":null,"dir":"Reference","previous_headings":"","what":"Mozambique administrative boundaries, level 3 — gadm41_moz","title":"Mozambique administrative boundaries, level 3 — gadm41_moz","text":"sf object.","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/reference/gadm41_moz.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mozambique administrative boundaries, level 3 — gadm41_moz","text":"","code":"gadm41_moz"},{"path":"https://rfsaldanha.github.io/zonalclim/reference/gadm41_moz.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Mozambique administrative boundaries, level 3 — gadm41_moz","text":"object class sf (inherits data.frame) 413 rows 3 columns.","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://rfsaldanha.github.io/zonalclim/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://rfsaldanha.github.io/zonalclim/news/index.html","id":"zonalclim-001","dir":"Changelog","previous_headings":"","what":"zonalclim 0.0.1","title":"zonalclim 0.0.1","text":"Initial version basic functions.","code":""}]
